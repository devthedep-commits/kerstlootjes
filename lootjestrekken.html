<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Kerst Lootjestrekker</title>
  <style>
    *{margin:0;padding:0;box-sizing:border-box;}
    body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;background:linear-gradient(to bottom,#fef2f2,#ffffff,#f0fdf4);min-height:100vh;padding:2rem 1rem;position:relative;overflow-x:hidden;}
    .snowflake{position:absolute;color:#bfdbfe;opacity:0.5;animation:pulse 2s infinite;pointer-events:none;}
    @keyframes pulse{0%,100%{opacity:0.5;}50%{opacity:0.8;}}
    .container{max-width:1024px;margin:0 auto;position:relative;z-index:10;}
    .header{text-align:center;margin-bottom:2rem;}
    .header-title{display:flex;align-items:center;justify-content:center;gap:1rem;margin-bottom:1rem;}
    h1{font-size:2rem;color:#dc2626;font-weight:600;}
    .subtitle{color:#6b7280;font-size:1rem;}
    .card{background:white;border-radius:0.75rem;padding:1.5rem;margin-bottom:1.5rem;box-shadow:0 1px 3px rgba(0,0,0,0.1);}
    .card-header{display:flex;align-items:center;gap:0.5rem;margin-bottom:1rem;}
    .card-title{font-size:1.25rem;font-weight:600;}
    .border-red{border:2px solid #fecaca;}
    .border-green{border:2px solid #bbf7d0;}
    .text-green{color:#16a34a;}
    .text-red{color:#dc2626;}
    button{padding:0.5rem 1rem;border:none;border-radius:0.5rem;font-size:1rem;font-weight:500;cursor:pointer;transition:all 0.2s;}
    button:disabled{opacity:0.5;cursor:not-allowed;}
    .btn-primary{background:linear-gradient(to right,#dc2626,#16a34a);color:white;padding:1rem 2rem;box-shadow:0 4px 6px rgba(0,0,0,0.1);}
    .btn-primary:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 8px rgba(0,0,0,0.15);}
    .btn-outline{background:white;border:2px solid #fecaca;color:#dc2626;}
    .btn-outline:hover{background:#fef2f2;}
    .participants-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:0.75rem;}
    .participant-item{display:flex;align-items:center;gap:0.5rem;background:linear-gradient(to right,#fef2f2,#f0fdf4);border:1px solid #fecaca;border-radius:0.5rem;padding:0.75rem;}
    .results-header{text-align:center;margin-bottom:2rem;}
    .results-title{display:flex;align-items:center;justify-content:center;gap:1rem;margin-bottom:1rem;}
    .results-title h1{color:#16a34a;}
    .results-actions{display:flex;justify-content:center;gap:0.75rem;margin-bottom:1.5rem;flex-wrap:wrap;}
    .results-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1rem;margin-bottom:2rem;}
    .result-card{background:white;border:2px solid #d1d5db;border-radius:0.75rem;padding:1.5rem;cursor:pointer;transition:all 0.2s;}
    .result-card:hover{box-shadow:0 10px 15px rgba(0,0,0,0.1);transform:translateY(-2px);}
    .result-card-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;}
    .result-content{min-height:6rem;display:flex;align-items:center;justify-content:center;text-align:center;}
    .revealed-box{background:linear-gradient(to right,#fee2e2,#dcfce7);border:2px solid #86efac;border-radius:0.5rem;padding:0.75rem;color:#15803d;font-weight:500;}
    .hidden-content{color:#9ca3af;}
    .center{display:flex;flex-direction:column;align-items:center;gap:1rem;margin-top:2rem;}
    .spinner{animation:spin 1s linear infinite;}
    @keyframes spin{from{transform:rotate(0deg);}to{transform:rotate(360deg);}}
  </style>
</head>
<body>
  <!-- sneeuwdecoratie -->
  <div class="snowflake" style="top:10%;left:10%;font-size:24px;">‚ùÑÔ∏è</div>
  <div class="snowflake" style="top:20%;right:15%;font-size:32px;">‚ùÑÔ∏è</div>
  <div class="snowflake" style="top:40%;left:20%;font-size:20px;">‚ùÑÔ∏è</div>
  <div class="snowflake" style="top:60%;right:25%;font-size:28px;">‚ùÑÔ∏è</div>
  <div class="snowflake" style="bottom:40%;left:15%;font-size:24px;">‚ùÑÔ∏è</div>
  <div class="snowflake" style="bottom:20%;right:20%;font-size:20px;">‚ùÑÔ∏è</div>

  <div class="container">
    <div id="setupView">
      <div class="header">
        <div class="header-title">
          <span style="font-size:3rem;">üéÅ</span>
          <h1>Kerst Lootjestrekker</h1>
          <span style="font-size:3rem;">üéÅ</span>
        </div>
        <p class="subtitle">De Kerstwens-Estafette üéÑ</p>
      </div>

      <!-- Alleen de deelnemerslijst -->
      <div id="participantsList" class="card border-green">
        <div class="card-header">
          <span style="font-size:1.5rem;">üë§</span>
          <h2 class="card-title text-red">Deelnemers (<span id="participantCount">0</span>)</h2>
        </div>
        <div id="participantsGrid" class="participants-grid"></div>
      </div>

      <div class="card border-red" style="margin-top:1.5rem;">
        <div class="card-header">
          <span style="font-size:1.5rem;">üé≤</span>
          <h2 class="card-title text-red">Bekijk jouw lootje</h2>
        </div>
        <div style="display:flex;gap:1rem;flex-wrap:wrap;align-items:center;">
          <select id="participantSelect" style="flex-grow:1; padding:0.5rem; font-size:1rem; border-radius:0.5rem; border:1px solid #fecaca;">
          </select>
          <button class="btn-primary" id="viewLootjeButton">Bekijk mijn lootje</button>
        </div>
        <div id="lootjeResult" class="center" style="margin-top:1rem; font-weight:600; font-size:1.25rem; color:#15803d;"></div>
      </div>
    </div>
  </div>

  <script>
    const vasteNamen = ["Sebastiaan","Manuela","Jens","Timo","Devin","Michael","Sabrina","Tanja","Rob"];
    // Nieuw willekeurig patroon waarbij niemand zichzelf trekt:
    const fixedAssignments = {
      "Sebastiaan": "Rob",
      "Manuela": "Timo",
      "Jens": "Manuela",
      "Timo": "Sabrina",
      "Devin": "Tanja",
      "Michael": "Sebastiaan",
      "Sabrina": "Devin",
      "Tanja": "Jens",
      "Rob": "Michael"
    };
    // Nieuwe niet-opvolgende pincodes (4 cijfers):
    const pincodes = {
      "Sebastiaan": "7312",
      "Manuela": "4685",
      "Jens": "2059",
      "Timo": "9147",
      "Devin": "3826",
      "Michael": "6501",
      "Sabrina": "4970",
      "Tanja": "1835",
      "Rob": "5264"
    };
    let participants = [];

    window.addEventListener('DOMContentLoaded', () => {
      updateParticipants(vasteNamen);
      populateDropdown();
      document.getElementById('viewLootjeButton').addEventListener('click', showLootje);
    });

    function updateParticipants(names){
      participants = names.map((name,i)=>({id:i,name}));
      document.getElementById('participantCount').textContent = participants.length;
      const grid = document.getElementById('participantsGrid');
      grid.innerHTML = participants.map(p=>`<div class="participant-item"><span>üë§</span><span>${p.name}</span></div>`).join('');
    }

    function populateDropdown(){
      const select = document.getElementById('participantSelect');
      select.innerHTML = '<option value="" disabled selected>-- Kies je naam --</option>';
      participants.forEach(p=>{
        const option = document.createElement('option');
        option.value = p.name;
        option.textContent = p.name;
        select.appendChild(option);
      });
    }

    function showLootje(){
      const select = document.getElementById('participantSelect');
      const selectedName = select.value;
      const resultDiv = document.getElementById('lootjeResult');
      if(!selectedName){
        resultDiv.textContent = 'Selecteer eerst je naam.';
        resultDiv.style.color = '#dc2626';
        return;
      }
      const enteredCode = prompt('Voer je pincode in:');
      if(!enteredCode || enteredCode !== pincodes[selectedName]){
        resultDiv.textContent = 'Onjuiste pincode, probeer opnieuw.';
        resultDiv.style.color = '#dc2626';
        return;
      }
      const receiver = fixedAssignments[selectedName];
      if(receiver){
        resultDiv.style.color = '#15803d';
        resultDiv.textContent = `Jij hebt ${receiver} üéÅ`;
      } else {
        resultDiv.style.color = '#dc2626';
        resultDiv.textContent = 'Er is geen lootje gevonden voor deze deelnemer.';
      }
    }
  </script>
</body>
</html>